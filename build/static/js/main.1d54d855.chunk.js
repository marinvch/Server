(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{68:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(21),s=n.n(a),r=n(10),o=n(8),i=n.n(o),j=n(15),u=n(7),l=n(3),b=n(4),p="http://localhost:5000",h=n(6),d=n.n(h),O=Object(c.createContext)(null),x=n(23),m=n.n(x),f=(n(68),n(0)),v=function(){var e=Object(b.f)(),t=Object(c.useState)(),n=Object(u.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(),o=Object(u.a)(r,2),h=o[0],O=o[1],x=Object(c.useState)(),v=Object(u.a)(x,2),g=v[0],N=v[1],w=Object(c.useState)(),k=Object(u.a)(w,2),y=k[0],C=k[1],S=function(){var t=Object(j.a)(i.a.mark((function t(n){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n.preventDefault(),h||(h=a),c={email:a,username:h,password:g,confirmPassword:y},d.a.post("".concat(p,"/auth/register"),c),e.push("/login")}catch(s){console.log(s)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("section",{className:"register-wrapper",children:[Object(f.jsx)("h1",{children:"Register your Account"}),Object(f.jsxs)("form",{onSubmit:S,children:[Object(f.jsx)(m.a,{}),Object(f.jsx)("input",{className:"register-input",type:"email",name:"email",placeholder:"Email",required:!0,onChange:function(e){return s(e.target.value)}}),Object(f.jsx)("input",{className:"register-input",type:"text",name:"username",placeholder:"Username",onChange:function(e){return O(e.target.value)}}),Object(f.jsx)("input",{className:"register-input",type:"password",name:"password",placeholder:"Password",required:!0,onChange:function(e){return N(e.target.value)}}),Object(f.jsx)("input",{className:"register-input",type:"password",name:"confirm_password",placeholder:"Confirm Password",required:!0,onChange:function(e){return C(e.target.value)}}),Object(f.jsx)("button",{className:"register-buton",type:"submit",children:"SignUp"}),Object(f.jsxs)("span",{children:[Object(f.jsx)("p",{children:"Already have an account"})," ",Object(f.jsx)(l.b,{to:"/login",children:"Login"})]})]})]})},g=(n(76),function(){var e=Object(c.useContext)(O).setUserData,t=Object(b.f)(),n=Object(c.useState)(),a=Object(u.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)(),h=Object(u.a)(o,2),x=h[0],v=h[1],g=function(){var n=Object(j.a)(i.a.mark((function n(c){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),n.prev=1,a={email:s,password:x},n.next=5,d.a.post("".concat(p,"/auth/login"),a).then((function(t){e({token:t.data.token,user:t.data.user}),localStorage.setItem("auth-token",t.data.token)}));case 5:t.push("/"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.error(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("section",{className:"login-wrapper",children:[Object(f.jsx)("h1",{children:"Log in to your Account"}),Object(f.jsxs)("form",{onSubmit:g,children:[Object(f.jsx)(m.a,{}),Object(f.jsx)("input",{className:"register-input",type:"text",name:"email",placeholder:"Email",required:!0,onChange:function(e){return r(e.target.value)}}),Object(f.jsx)("input",{className:"register-input",type:"password",name:"password",placeholder:"Password",required:!0,onChange:function(e){return v(e.target.value)}}),Object(f.jsx)("button",{className:"login-buton",type:"submit",children:"Login"}),Object(f.jsxs)("span",{children:[Object(f.jsx)("p",{children:"Don't have an account?"})," ",Object(f.jsx)(l.b,{to:"/register",children:"Register"})]})]})]})})}),N=(n(77),function(){var e=Object(c.useContext)(O),t=e.userData;e.setUserData,Object(b.f)();return Object(f.jsxs)("header",{className:"header",children:[Object(f.jsx)("section",{className:"logo",children:Object(f.jsx)("h1",{children:"MERN FORUM"})}),t.user?Object(f.jsxs)("section",{className:"navigation",children:[Object(f.jsx)(l.b,{className:"nav-item",to:"/",children:"Home"}),Object(f.jsx)(l.b,{className:"nav-item",to:"/create-post",children:"Add Post"}),Object(f.jsx)(l.b,{className:"nav-item",to:"/profile",children:"Profile"}),Object(f.jsx)(l.b,{className:"nav-item",to:"/",onClick:function(){return localStorage.clear(),void(window.location.href="/")},children:"Logout"})]}):Object(f.jsxs)("section",{className:"navigation",children:[Object(f.jsx)(l.b,{className:"nav-item",to:"/",children:"Home"}),Object(f.jsx)(l.b,{className:"nav-item",to:"/register",children:"Register"}),Object(f.jsx)(l.b,{className:"nav-item",to:"/login",children:"Login"})]})]})}),w=(n(78),function(){return Object(f.jsx)("footer",{children:Object(f.jsx)("p",{children:"Created by: Marin Cholakov"})})}),k=n(99),y=n(43),C=n.n(y),S=n(42),D=n.n(S),A=(n(79),n(31)),F=n.n(A);var P=function(e){var t=e.posts,n=Object(c.useContext)(O).userData,a=function(){var e=Object(j.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.a.delete("".concat(p,"/posts/delete/").concat(t),{headers:{"x-auth-token":n.token}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(f.Fragment,{children:t.length?Object(f.jsx)("section",{className:"post-wrapper",children:n.user?Object(f.jsx)(f.Fragment,{children:t.map((function(e,t){return Object(f.jsxs)("li",{children:[Object(f.jsxs)("section",{className:"user",children:[Object(f.jsx)("p",{children:"User: "}),Object(f.jsx)("p",{children:e.author.username})]}),Object(f.jsx)("section",{className:"content",children:Object(f.jsx)(l.b,{className:"link-content",to:{pathname:"/view-post/".concat(e._id)},children:Object(f.jsxs)("p",{children:["Title:",e.title]})})}),Object(f.jsxs)("section",{className:"info",children:[Object(f.jsx)("p",{children:"Detailes"}),F()("".concat(e.createdAt)).fromNow(),Object(f.jsx)(l.b,{to:{pathname:"/edit-post/".concat(e._id)},children:Object(f.jsx)(D.a,{})}),Object(f.jsx)(l.b,{to:"/",onClick:function(){return a(e._id)},children:Object(f.jsx)(C.a,{})})]})]},t)})).reverse()}):Object(f.jsx)(f.Fragment,{children:t.map((function(e,t){return Object(f.jsxs)("li",{children:[Object(f.jsxs)("section",{className:"user",children:[Object(f.jsx)("p",{children:"User: "}),Object(f.jsx)("p",{children:e.author.username})]}),Object(f.jsx)("section",{className:"content",children:Object(f.jsx)(l.b,{className:"link-content",to:{pathname:"/view-post/".concat(e._id)},children:Object(f.jsxs)("p",{children:["Title:",e.title]})})}),Object(f.jsxs)("section",{className:"info",children:[Object(f.jsx)("p",{children:"Detailes"}),F()("".concat(e.createdAt)).fromNow()]})]},t)})).reverse()})}):Object(f.jsx)("div",{className:"spinner",children:Object(f.jsx)(k.a,{})})})},U=(n(81),function(){var e=Object(c.useContext)(O).userData,t=Object(b.f)(),n=Object(c.useState)({title:"",content:"",date:"",author:""}),a=Object(u.a)(n,2),s=a[0],o=a[1],l=function(){var n=Object(j.a)(i.a.mark((function n(c){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),n.prev=1,s.title&&s.content){n.next=4;break}return n.abrupt("return",alert("Fill all Fields."));case 4:return e.token&&(s.date=new Date,s.author=e.user.id),n.next=7,d.a.post("".concat(p,"/posts/createpost"),s,{headers:{"x-auth-token":e.token}});case 7:t.push("/"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}();return Object(f.jsxs)("section",{className:"post-wrapper",children:[Object(f.jsx)("h1",{children:"Add New Post"}),Object(f.jsxs)("form",{onSubmit:l,children:[Object(f.jsx)("input",{className:"post-input",type:"text",placeholder:"Title",onChange:function(e){return o(Object(r.a)(Object(r.a)({},s),{},{title:e.target.value}))}}),Object(f.jsx)("input",{className:"post-input",type:"text",placeholder:"Content",onChange:function(e){return o(Object(r.a)(Object(r.a)({},s),{},{content:e.target.value}))}}),Object(f.jsx)("button",{type:"submit",children:"Save new post"})]})]})}),E=function(e){var t=Object(c.useContext)(O).userData,n=Object(c.useState)({}),a=Object(u.a)(n,2),s=a[0],r=a[1],o=e.match.params.id;return Object(c.useEffect)((function(){d.a.get("".concat(p,"/posts/").concat(o)).then((function(e){r(e.data)}))}),[o,e]),Object(f.jsx)(f.Fragment,{children:s.title&&s.content?Object(f.jsxs)("section",{className:"post-wrapper",children:[Object(f.jsx)("p",{children:s.title}),Object(f.jsx)("p",{children:s.content}),t.user?Object(f.jsx)("button",{children:"Add Comment"}):Object(f.jsx)(f.Fragment,{})]}):Object(f.jsx)(k.a,{})})},q=function(e){var t=Object(b.f)(),n=Object(c.useContext)(O).userData,a=Object(c.useState)({}),s=Object(u.a)(a,2),o=s[0],i=s[1];return Object(c.useEffect)((function(){d.a.get("".concat(p,"/posts/").concat(e.match.params.id)).then((function(e){i(e.data)}))}),[e.match.params.id]),Object(f.jsxs)("section",{className:"post-wrapper",children:[Object(f.jsx)("h1",{children:"Edit Post"}),o.title&&o.content?Object(f.jsxs)("form",{children:[Object(f.jsx)("input",{className:"post-input",value:o.title,onChange:function(e){return i(Object(r.a)(Object(r.a)({},o),{},{title:e.target.value}))},type:"text"}),Object(f.jsx)("input",{className:"post-input",value:o.content,onChange:function(e){return i(Object(r.a)(Object(r.a)({},o),{},{content:e.target.value}))},type:"text"}),Object(f.jsx)("button",{onClick:function(c){c.preventDefault();var a={title:o.title,content:o.content};d.a.put("".concat(p,"/posts/").concat(e.match.params.id),a,{headers:{"x-auth-token":n.token}}).then(t.push("/"))},children:"Save new post"})]}):Object(f.jsx)(k.a,{})]})};n(82);var L=function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("section",{className:"profile",children:[Object(f.jsx)("h1",{children:" Username"}),Object(f.jsx)("section",{children:"Avatar"}),Object(f.jsx)("section",{children:"Number of posts"}),Object(f.jsx)("section",{children:"Number of comments"})]})})};var R=function(){return Object(b.f)(),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"",children:"Add Comment"})})};n(83);function _(){var e=Object(c.useState)({token:void 0,user:void 0}),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),o=Object(u.a)(s,2),h=o[0],x=o[1],m=function(){var e=Object(j.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("".concat(p,"/posts/")).then((function(e){x(e.data)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,d.a.post("".concat(p,"/auth/validtoken"),null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,d.a.get("".concat(p,"/auth/currentuser"),{headers:{"x-auth-token":t}});case 8:n=e.sent,a({token:t,user:n.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){k(),m()}),[h]),Object(f.jsx)(l.a,{children:Object(f.jsxs)(O.Provider,{value:{userData:n,setUserData:a},children:[Object(f.jsx)(N,{}),Object(f.jsxs)(b.c,{children:[Object(f.jsx)(b.a,{path:"/register",component:v}),Object(f.jsx)(b.a,{path:"/login",component:g}),Object(f.jsx)(b.a,{path:"/profile",component:L}),Object(f.jsx)(b.a,{exact:!0,path:"/",render:function(){return Object(f.jsx)(P,{posts:h})}}),Object(f.jsx)(b.a,{path:"/create-post",component:U}),Object(f.jsx)(b.a,{path:"/edit-post/:id",render:function(e){return Object(f.jsx)(q,Object(r.a)(Object(r.a)({},e),{},{posts:h}))}}),Object(f.jsx)(b.a,{path:"/view-post/:id",render:function(e){return Object(f.jsx)(E,Object(r.a)(Object(r.a)({},e),{},{posts:h}))}}),Object(f.jsx)(b.a,{path:"/createcomment",component:R})]}),Object(f.jsx)(w,{})]})})}n(84);s.a.render(Object(f.jsx)(_,{}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.1d54d855.chunk.js.map